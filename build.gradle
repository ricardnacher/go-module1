/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.0.2/samples
 */

plugins {
    id 'com.github.blindpirate.gogradle' version '0.11.4'
    id "org.sonarqube" version "3.3"
    id 'com.palantir.git-version' version '0.12.3'
}

golang {
    packagePath = 'github.com/midokura/goandgradle' // go import path of project to be built, NOT local file system path!
}

dependencies {
    "gradle.plugin.com.github.blindpirate:gogradle:0.11.4"
}   

def gitDetails = versionDetails()
gitDetails.properties.each { 
    println "$it.key -> $it.value" 
}

sonarqube {
    properties {
        property 'sonar.host.url', 'https://sonarcloud.io/'
        property 'sonar.sourceEncoding', 'UTF-8'
        property 'sonar.organization', 'midokura'
        property 'sonar.projectKey', 'go-module1'
        property 'sonar.projectName', 'go-module1'    
        property 'sonar.sources', '.'
        property 'sonar.login', System.getenv('SONAR_LOGIN')
        property 'sonar.version', gitDetails.version
        property 'sonar.branch.name', gitDetails.branchName
    }
}



